<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>No-Copyright Web Tool</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    button { padding: 10px 20px; margin-top: 10px; }
    video { max-width: 100%; margin-top: 20px; }
  </style>
</head>
<body>
  <h2>🎬 No-Copyright Web Tool</h2>
  <input type="file" id="uploader" accept="video/*"><br>
  <button onclick="processVideo()">Process Video</button>
  <p id="status">Status: Idle</p>
  <video id="output" controls></video>

  <script src="ffmpeg.min.js"></script>
  <script>
    const { createFFmpeg, fetchFile } = FFmpeg;
    const ffmpeg = createFFmpeg({
      log: true,
      corePath: './ffmpeg-core.js'
    });

    async function processVideo() {
      const fileInput = document.getElementById('uploader');
      const status = document.getElementById('status');
      if (!fileInput.files.length) {
        alert("कृपया पहले एक वीडियो चुनें।");
        return;
      }
      const file = fileInput.files[0];
      status.textContent = "Status: FFmpeg लोड हो रहा है...";
      await ffmpeg.load();
      ffmpeg.FS('writeFile', 'input.mp4', await fetchFile(file));
      status.textContent = "Status: प्रोसेसिंग जारी है...";
      await ffmpeg.run('-i', 'input.mp4', '-vf', 'hue=s=0', 'output.mp4');
      const data = ffmpeg.FS('readFile', 'output.mp4');
      const videoURL = URL.createObjectURL(new Blob([data.buffer], { type: 'video/mp4' }));
      document.getElementById('output').src = videoURL;
      status.textContent = "Status: पूरा हो गया ✅";
    }
  </script>
</body>
</html>
